<html>
  <head>
    <title>Firestore Looplock Demo</title>
  </head>
  <body id="document-body">
    <table>
      <tr>
        <td>Firebase SDK:</td>
        <td id="firebase-sdk-field">Wait</tdid="firebase-sdk-field">
      </tr>
      <tr>
        <td>Ongoing update?</td>
        <td id="ongoing-update-field">Wait</td>
      </tr>
      <tr>
        <td>Expected documents per update:</td>
        <td id="firestore-expected-update-count">Wait</td>
      </tr>
      <tr>
        <td>Current document count:</td>
        <td id="current-document-count-field">Unknown</td>
      </tr>
    </table>

    <hr />

    <table id="update-data-table">
      <tr>
        <td>Timestamp</td>
        <td>Duration</td>
        <td>Average RAF period</td>
        <td>Minimum RAF period</td>
        <td>Maximum RAF period</td>
      </tr>
    </table>

    <script>
      const targetFirebaseVersion = "7.8.1";
      const bodyElement = document.getElementById("document-body");

      const firebaseAppNode = document.createElement("script")
      firebaseAppNode.setAttribute("src", `https://www.gstatic.com/firebasejs/${targetFirebaseVersion}/firebase-app.js`);
      bodyElement.appendChild(firebaseAppNode);

      const firebaseFirestoreNode = document.createElement("script");
      firebaseFirestoreNode.setAttribute("src", `https://www.gstatic.com/firebasejs/${targetFirebaseVersion}/firebase-firestore.js`);
      bodyElement.appendChild(firebaseFirestoreNode);

      const mainJsNode = document.createElement("script");
      mainJsNode.setAttribute("src", "./index.js");
      bodyElement.appendChild(mainJsNode);
    </script>
  </body>
</html>
